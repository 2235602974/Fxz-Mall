version: '3'
services:
  fxz-elasticsearch:
    image: elasticsearch:7.13.2 #镜像版本
    container_name: fxz-elasticsearch #容器名称
    restart: unless-stopped  # 指定容器退出后的重启策略为始终重启，但是不考虑在Docker守护进程启动时就已经停止了的容器
    ports:  #端口映射
      - 9200:9200
      - 9300:9300
    volumes: #数据卷挂载
      - ./elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml
      - ./elasticsearch/data:/usr/share/elasticsearch/data
      - ./elasticsearch/plugins:/usr/share/elasticsearch/plugins
    environment:  # 设置环境变量,相当于docker run命令中的-e
      TZ: Asia/Shanghai
      LANG: en_US.UTF-8
      discovery.type: single-node
      ES_JAVA_OPTS: "-Xmx512m -Xms512m"
      ELASTIC_PASSWORD: "123456" # elastic账号密码

  fxz-kibana:
    image: kibana:7.13.2 #镜像版本
    container_name: fxz-kibana #容器名称
    restart: unless-stopped # 指定容器退出后的重启策略为始终重启，但是不考虑在Docker守护进程启动时就已经停止了的容器
    ports:  #端口映射
      - 5601:5601
    volumes:
      - ./kibana/config/kibana.yml:/usr/share/kibana/config/kibana.yml #数据卷挂载
    links:
      - fxz-elasticsearch:elasticsearch
    depends_on:
      - fxz-elasticsearch

  fxz-minio:
    image: minio/minio:RELEASE.2021-06-17T00-10-46Z #镜像版本
    container_name: fxz-minio #容器名
    restart: unless-stopped # 指定容器退出后的重启策略为始终重启，但是不考虑在Docker守护进程启动时就已经停止了的容器
    command: server /data
    ports:
      - 9000:9000
    volumes:
      - ./minio/data:/data #数据卷挂载
    environment:
      - MINIO_ROOT_USER=admin #登录账号
      - MINIO_ROOT_PASSWORD=admin123456 #登录密码

  fxz-rabbitmq:
    image: rabbitmq:3.7.8-management #镜像版本
    container_name: fxz-rabbitmq   # 容器名
    hostname: fxz-rabbit
    restart: unless-stopped   # 指定容器退出后的重启策略为始终重启，但是不考虑在Docker守护进程启动时就已经停止了的容器
    environment: # 设置环境变量,相当于docker run命令中的-e
      TZ: Asia/Shanghai
      LANG: en_US.UTF-8
      RABBITMQ_DEFAULT_VHOST: /  # 主机名
      RABBITMQ_DEFAULT_USER: fxz      # 登录账号
      RABBITMQ_DEFAULT_PASS: 123456      # 登录密码
    volumes: # 数据卷挂载路径设置,将本机目录映射到容器目录
      - "./rabbitmq/data:/var/lib/rabbitmq"
    ports: # 映射端口
      - 5672:5672
      - 15672:15672
